#!/usr/bin/zsh
#
cp bom.autogenerated.csv bom.editing.csv

perl -pi -e "s/^[^;]*;\"LED.*//" bom.editing.csv

perl -pi -e "s/^[^;]*;\"H[0-9].*//" bom.editing.csv

perl -pi -e "s/^[^;]*;\"SW_.*//" bom.editing.csv

perl -pi -e "s/^[^;]*;\"BUZ1.*//" bom.editing.csv

sed -i '/^$/d' bom.editing.csv

awk -i inplace -F';' '{print $5,$1,$3}' OFS=',' bom.editing.csv

perl -pi -e 's/^("D_Small.*)/$1,"C81598"/' bom.editing.csv
perl -pi -e 's/^("0.1uF.*)/$1,"C49678"/' bom.editing.csv
perl -pi -e 's/^("330.*)/$1,"C17630"/' bom.editing.csv
perl -pi -e 's/^("SW_Push.*)/$1,"C318884"/' bom.editing.csv
perl -pi -e 's/^("1uF.*)/$1,"C28323"/' bom.editing.csv
perl -pi -e 's/^("10uF.*)/$1,"C15850"/' bom.editing.csv
perl -pi -e 's/^("Conn_01x04.*)/$1,"C160404"/' bom.editing.csv
perl -pi -e 's/^("10k.*)/$1,"C17414"/' bom.editing.csv
perl -pi -e 's/^("ATmega32U4.*)/$1,"C44854"/' bom.editing.csv
perl -pi -e 's/^("16MHz.*)/$1,"C13738"/' bom.editing.csv
perl -pi -e 's/^("22pF.*)/$1,"C1804"/' bom.editing.csv
perl -pi -e 's/^("22".*)/$1,"C17561"/' bom.editing.csv

perl -pi -e 's/"Designation.*/Comment,Designator,Footprint,JLCPCB Part #ï¼ˆoptional )/' bom.editing.csv

cp -rvf bom.editing.csv bom.csv

rm bom.editing.csv
